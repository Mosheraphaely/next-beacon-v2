# Note: Any strings begining with @ or % must be wrapped in quote marks
---
id: performance
title: Performance
isPrimary: true
description: Fastest site in the west
charts:
  -
    question: How is the site's performance overall
    name: timings
    query:  "@concat(
              page:load-timing->median(context.timings.offset.loadEventStart),
              page:load-timing->median(context.timings.offset.domComplete),
              page:load-timing->median(context.timings.offset.domContentLoadedEventStart),
              page:load-timing->median(context.timings.offset.domInteractive)
            )
            ->divide(1000)
            ->relabel(CONCATENATION_RESULT,Start,Dom complete,Content loaded,Interactive)"
    datalabel: Seconds
    printer: AreaChart
  -
    question: timing of fontsLoaded
    name: fontsLoaded
    query: page:load-timing->median(context.timings.marks.fontsLoaded)
    datalabel: fontsLoaded
  -
    question: What are browsers' average load times over the past 7 days?
    name: averagepageload/offset
    query: page:load-timing->median(context.timings.offset.loadEventEnd)->filter(page.location.type=frontpage)->filter(device.browserName!=false)->group(device.browserName)->divide(1000)->sortAsc(device.browserName)
    printer: BarChart
    datalabel: Average page load time by browser
  -
    question: What are browsers' average load times over the past 7 days (from point page has downloaded)?
    name: averagepageload/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.loadEventEnd)->filter(page.location.type=frontpage)->filter(device.browserName!=false)->group(device.browserName)->divide(1000)->sortAsc(device.browserName)
    printer: BarChart
    datalabel: Average page load time by browser (graphs offset from the domLoading event)
