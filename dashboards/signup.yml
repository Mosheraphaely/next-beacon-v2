# Note: Any strings begining with @ or % must be wrapped in quote marks
---
id: signup
title: Signup
isPrimary: true
charts:
  -
    question: How many people land on the form every day?
    name: visitors
    query: page:view->count()->filter(page.location.path~signup)->interval(d)
    datalabel: Signup visitors per day
  -
    question: How many succesful registrations have we had?
    name: registrations
    query: page:view->filter(page.location.path~thank-you)->count()
    datalabel: Signup succesful registrations
  -
    question: Is our conversion rate increasing?
    name: conversion
    query: "@pct(
            page:view->count()->
             filter(page.location.path~thank-you)->
             interval(d),
            page:view->
             count()->
             filter(page.location.path~signup)->
             interval(d)
            )"
    datalabel: Conversion rate
  - 
    question: What's our daily conversion rate?
    name: compare
    query: "@concat(
            page:view->
             count()->
             filter(page.location.path~signup)->
             interval(d),
            page:view->
             count()->
             filter(page.location.path~thank-you)->
             interval(d)
            )->relabel(CONCATENATION_RESULT,Signup Form Views,Thank You Page Views)"
    printer: ColumnChart
    datalabel: Signup success rate
  - 
    question: What's our distribution of payment methods?
    name: payment
    query: "@concat(
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-amex)
             ->interval(d), 
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-master)
             ->interval(d),
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-visa)
             ->interval(d)
            )->relabel(CONCATENATION_RESULT, Amex, MasterCard, Visa)"
    datalabel: Payment Methods
  -
    question: What are our top browsers?
    name: browsers
    query: "@pct(page:view
                  ->count()
                  ->group(device.browserName)
                  ->filter(page.location.path~signup)
                  ->filter(device.browserName)
                  ->filter(device.browserName!=false),
                 page:view
                  ->count()
                  ->filter(page.location.path~signup)
                  ->filter(device.browserName)
                  ->filter(device.browserName!=false))
                ->sortDesc()"
    printer: BarChart
    datalabel: Signup Browsers
