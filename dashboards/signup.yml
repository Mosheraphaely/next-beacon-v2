# Note: Any strings begining with @ or % must be wrapped in quote marks
---
id: signup
title: Signup
isPrimary: true
charts:
  -
    question: How many visits do we have on the form every day?
    name: visitors
    query: page:view->count(device.spoorId)->filter(page.location.path~signup)->interval(d)
    datalabel: Signup visitors per day
  -
    question: How many succesful registrations have we had?
    name: registrations
    query: signup:subscription-created->count()
    datalabel: Signup succesful registrations
  - 
    question: What's our daily conversion rate?
    name: daily
    query: "@concat(
            page:view->
             count(device.spoorId)->
             filter(page.location.path~signup)->
             interval(d),
            signup:subscription-created->
             count()->
             interval(d)
            )->relabel(CONCATENATION_RESULT,Signup Form Views,Subscriptions)"
    printer: StackedColumnChart
    datalabel: Signup success rate
  - 
    question: Pageviews vs Unique visits
    name: compare
    query: "@concat(page:view->
                    count(device.spoorId)->
                    filter(page.location.path~signup)->
                    interval(d), page:view->
                    count()->
                    filter(page.location.path~signup)->
                    interval(d))->
            print(StackedColumnChart)->
            relabel(CONCATENATION_RESULT,Unique visits, Pageviews)"
    printer: StackedColumnChart
    datalabel: Signup success rate    
  - 
    question: What's our distribution of payment methods?
    name: payment
    query: "@concat(
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-amex)
             ->interval(d), 
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-master)
             ->interval(d),
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-visa)
             ->interval(d)
            )->relabel(CONCATENATION_RESULT, Amex, MasterCard, Visa)"
    datalabel: Payment Methods
  -
    question: What are our top browsers?
    name: browsers
    query: "@pct(page:view
                  ->count()
                  ->group(device.browserName)
                  ->filter(page.location.path~signup)
                  ->filter(device.browserName)
                  ->filter(device.browserName!=false),
                 page:view
                  ->count()
                  ->filter(page.location.path~signup)
                  ->filter(device.browserName)
                  ->filter(device.browserName!=false))
                ->sortDesc()"
    printer: BarChart
    datalabel: Signup Browsers
  -
    question: (BETA) How many failed registrations do we have?
    name: failed
    query: "@concat(signup:subscription-created->count()->interval(d),signup:subscription-creation-failed->count()->interval(d))->relabel(CONCATENATION_RESULT,Successful,Failed)->print(StackedColumnChart)"
    printer: StackedColumnChart
    datalabel: Signup Browsers
