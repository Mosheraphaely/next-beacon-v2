# Note: Any strings begining with @ or % must be wrapped in quote marks
---
id: signup
title: Signup
isPrimary: true
charts:
  -
    question: How many Unique Visitors do we get every day?
    name: visitors
    query: page:view->count(device.spoorId)->filter(page.location.path~signup)->interval(d)
    datalabel: Signup visitors per day
  -
    question: How many succesful registrations have we had?
    name: registrations
    interval: false
    query: signup:subscription-created->filter(context.isTestEvent=false)->count()
    datalabel: Signup succesful registrations
  -
    question: How many bounces have we had today?
    name: bounces
    interval: false,
    timeframe: this_1_days
    query: "signup:bounce->count(device.spoorId)->filter(page.location.path~signup)->filter(context.message.isTestEvent=false)"
    datalabel: Bounces today
  -
    question: What's our daily conversion rate?
    name: daily
    query: "@concat(
            page:view->
             count(device.spoorId)->
             filter(page.location.path~signup)->
             interval(d),
            signup:subscription-created->
             count()->
             interval(d)
            )->relabel(CONCATENATION_RESULT,Unique Visitors,Subscriptions)"
    printer: StackedColumnChart
    datalabel: Signup success rate
  - 
    question: Pageviews vs. Unique Visitors
    name: compare
    query: "@concat(page:view->
                    count(device.spoorId)->
                    filter(page.location.path~signup)->
                    interval(d), page:view->
                    count()->
                    filter(page.location.path~signup)->
                    interval(d))->relabel(CONCATENATION_RESULT,Unique visitors, Pageviews)"
    printer: StackedAreaChart
    datalabel: Signup success rate    
  -
    question: What are our top browsers?
    name: browsers
    query: "@pct(page:view
                  ->count()
                  ->group(device.browserName)
                  ->filter(page.location.path~signup)
                  ->filter(device.browserName)
                  ->filter(device.browserName!=false),
                 page:view
                  ->count()
                  ->filter(page.location.path~signup)
                  ->filter(device.browserName)
                  ->filter(device.browserName!=false))
                ->sortDesc()"
    printer: BarChart
    datalabel: Signup Browsers
  -
    question: (BETA) Failed Registrations
    name: failed
    query: "@concat(signup:subscription-created->count()->interval(d),signup:subscription-creation-failed->count()->interval(d))->relabel(CONCATENATION_RESULT,Successful,Failed)->print(StackedColumnChart)"
    printer: StackedColumnChart
    datalabel: Signup Browsers
  - 
    question: (BETA) Payment Methods
    name: payment
    query: "@concat(
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-amex)
             ->interval(d), 
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-master)
             ->interval(d),
            cta:click
             ->count()
             ->filter(context.domPath=page:signup | signup-form | cc-visa)
             ->interval(d)
            )->relabel(CONCATENATION_RESULT, Amex, MasterCard, Visa)"
    datalabel: Payment Methods
  -
    question: How many subscribers does light sign-up get every day?
    name: lightsignup
    query: light-signup:subscribed->count()->interval(d)
    datalabel: "Subscribers p/day"
