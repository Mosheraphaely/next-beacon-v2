# Note: Any strings begining with @ or % must be wrapped in quote marks
---
id: lightsignup
title: Light Signup
isPrimary: true
charts:
  -
    question: How many subscribers does light signup get every day?
    name: lightsignup
    query: light-signup:subscribed->count()->filter(context.isTestEvent=false)->interval(d)
    datalabel: "Subscribers p/day"
  -
    question: "When served the light signup form, how many users subscribe?"
    name: views-to-subscriptions
    query: "@concat(page:view->count(device.spoorId)->filter(user.ab.tests.lightSignUp)->filter(page.location.type=article)->filter(user.ab.tests.lightSignUp!=control),light-signup:subscribed->count()->filter(context.isTestEvent=false))->relTime(this_14_days)->interval(d)"
    printer: StackedLineChart
    datalabel: "Subscribers p/day"
  -
    question: What percentage of users close the light signup form?
    name: lighsignup-close
    query: "@pct(cta:click->count(device.spoorId)->filter(context.app=article)->filter(context.domPath~light-signup)->filter(context.target=close),page:view->count(device.spoorId)->filter(user.ab.tests.lightSignUp)->filter(page.location.type=article)->filter(user.ab.tests.lightSignUp!=control))->relTime(this_14_days)->interval(d)"
    printer: PercentLineChart
  -
    question: "How many (trackable) light signup subscribers go on to purchase a subscription?"
    name: lightsignup-conversion
    query: "@funnel(light-signup:subscribed->count(device.spoorId)->filter(context.isTestEvent=false),signup:subscription-created->count(device.spoorId)->filter(context.isTestEvent=false))->with(device.spoorId)"
    printer: Table
    datalabel: "Conversion all-time"
  -
    question: How many visits to the subscription funnel does light signup generate?
    name: lightsignup-funnel
    query: email:click->count(context.deviceId)->filter(context.product="light-signup")->filter(context.targetLinkUrl~"801043")
    datalabel: "Funnel clicks p/day"
  -
    question: How many anonymous people viewed an article in each light signup AB test group
    name: lightsignup-views
    query: page:view->count(device.spoorId)->filter(page.location.type="article")->filter(!user.uuid)->filter(user.ab.tests.lightSignUp)->group(user.ab.tests.lightSignUp)->interval(d)->print(StackedColumnChart)
    datalabel: "Page views"
  -
    question: How many people signed up in each light signup AB test group
    name: lightsignup-by-test-group
    query: light-signup:subscribed->count()->group(user.ab.tests.lightSignUp)->interval(d)->print(LineChart)
    datalabel: "Subscribers p/day"
  -
    question: What's the daily click-through rate on the light signup email
    name: lightsignup-daily
    query: email:click->count(context.deviceId)->filter(context.product="light-signup")->group(context.daysSinceSignup)->print(ColumnChart)
    datalabel: "Clicks p/day"
