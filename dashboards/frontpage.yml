# Note: Any strings begining with "@ or %, or containing a : followed by a space, must be wrapped in quote marks"
---
id: frontpage
title: Front page
isPrimary: true
charts:

  # PRE-PREPARED --------------------------------------------------
  -
    question: How many views does the front page recieve?
    name: views
    query: "@concat(page:view->count()->filter(device.spoorId)->filter(page.location.type=frontpage),page:view->count()->filter(device.spoorId)->filter(user.uuid)->filter(page.location.type=frontpage),page:view->count()->filter(device.spoorId)->filter(!user.uuid)->filter(page.location.type=frontpage))->relTime(previous_14_days)->interval(d)->relabel(_headings,All,Logged In,Anonymous)"
    datalabel: Total
    colspan: 12
  -
    question: Are daily front page member counts increasing?
    name: members/daily
    query: page:view->count(user.uuid)->filter(page.location.type=frontpage)
    datalabel: Members
  -
    question: What percentage of total page views are of the frontpage?
    name: views/proportion
    query: "@concat(@pct(page:view->count()->filter(device.spoorId)->filter(page.location.type=frontpage),page:view->count()->filter(device.spoorId)),@pct(page:view->count()->filter(device.spoorId)->filter(user.uuid)->filter(page.location.type=frontpage),page:view->count()->filter(device.spoorId)->filter(user.uuid)),@pct(page:view->count()->filter(device.spoorId)->filter(!user.uuid)->filter(page.location.type=frontpage),page:view->count()->filter(device.spoorId)->filter(!user.uuid)))->relTime(previous_14_days)->interval(d)->relabel(_headings,All,Logged In,Anonymous)"
    datalabel: View share

  -
    question: What percentage of users visit the frontpage?
    name: visitors/proportion
    query: "@concat(@pct(page:view->count(device.spoorId)->filter(page.location.type=frontpage),page:view->count(device.spoorId)),@pct(page:view->count(user.uuid)->filter(user.uuid)->filter(page.location.type=frontpage),page:view->count(user.uuid)->filter(user.uuid)),@pct(page:view->count(device.spoorId)->filter(!user.uuid)->filter(page.location.type=frontpage),page:view->count(device.spoorId)->filter(!user.uuid)))->relabel(_headings,All,Logged In,Anonymous)->relTime(previous_14_days)->interval(d)"
    datalabel: Member share

  -
    question: What % of users start a visit on the front page?
    name: visitors/landing-proportion
    query: "@pct(page:view->count()->filter(page.location.type=frontpage)->filter(page.referrer.websiteType)->filter(page.referrer.websiteType!=internal),page:view->count()->filter(page.location.type=frontpage))->relTime(previous_14_days)->interval(d)"

  -
    question: How many times does a user visit the front page in one session?
    name: frontpage-views/session
    query: "@ratio(page:view->count()->filter(page.location.type=frontpage),page:view->count(spoorInfo.sessionId))->relTime(this_14_days)->interval(d)"

  -
    question: What % of counted content viewed is clicked from the front page?
    name: content-views/referrer-frontpage
    query: "@pct(page:view->count()->filter(content.isCountedContent)->filter(page.referrer.type=frontpage),page:view->count()->filter(content.isCountedContent))->relTime(this_14_days)->interval(d)"

  # SCROLL DEPTH --------------------------------------------------
  -
    question: What percentage of homepage users are scrolling to each section?
    name: scrolldepth
    query: "@pct( page:scrolldepth->count()->group(context.componentId), page:scrolldepth->count()->filter(context.componentId=headlines) )->filter(page.location.type=frontpage)->filter(context.componentId)->sortDesc()"
    printer: BarChart
    datalabel: Scroll depth

  # CTR (breakdown by section) --------------------------------------------------
  -
    question: What is the click distribution across the homepage (excl. Headlines)?
    name: ctr/sectionbreakdown
    query: "@concat(@pct(cta:click->count()->filter(click.dataTrackablePath~fastft),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~top-stories),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~Opinion),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~markets),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~technology),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~video),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~editors-picks),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~most-popular),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~header),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~drawer-toggle),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~myft),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~us-election-midriff),cta:click->count()),@pct(cta:click->count()->filter(click.dataTrackablePath~regional-top-stories),cta:click->count()))->filter(page.location.type=frontpage)->relabel(_headings,fastft,top-stories,opinion,markets,technology,video,highlights,most-read,header,drawer,myft,us-election,regional)->sortDesc()"
    printer: BarChart

  -
    question: What % of users click on a section item on the hompage?
    name: ctr/section
    query: "@concat(@pct(@sum(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~fastft),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~top-stories),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~Opinion),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~markets),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~technology),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~video),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~editors-picks),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~most-popular),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~header),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~myft),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~us-election-midriff),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~regional-top-stories)),page:view->count(device.spoorId))->filter(page.location.type=frontpage),@pct(@sum(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~fastft),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~top-stories),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~Opinion),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~markets),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~technology),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~video),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~editors-picks),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~most-popular),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~header),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~myft),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~us-election-midriff),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~regional-top-stories)),page:view->count(device.spoorId))->filter(user.uuid)->filter(page.location.type=frontpage),@pct(@sum(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~fastft),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~top-stories),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~Opinion),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~markets),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~technology),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~video),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~editors-picks),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~most-popular),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~header),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~myft),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~us-election-midriff),cta:click->count(device.spoorId)->filter(click.dataTrackablePath~regional-top-stories)),page:view->count(device.spoorId))->filter(!user.uuid)->filter(page.location.type=frontpage))->relTime(previous_14_days)->interval(d)->relabel(_headings,All,Logged In,Anonymous)"

  -
    question: What % of users click on each section?
    name: ctr/users/sectiondistribution
    query: "@concat(@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~fastft),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~headlines),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~top-stories),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~opinion),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~markets),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~technology),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~video),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~editors-picks),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~most-popular),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~header),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~drawer-toggle),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~myft),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~us-election-midriff),cta:click->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~regional-top-stories),cta:click->count(device.spoorId)))->filter(page.location.type=frontpage)->relabel(_headings,fastft,headlines,top-stories,opinion,markets,technology,video,highlights,most-read,header,drawer,myft,us elections,regional)->sortDesc()"
    printer: StackedBarChart

  -
    question: What is the CTR on each section on the homepage?
    name: ctr/sectiondistribution
    query: "@concat(@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~header),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~top-stories),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~fastft),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~editors-picks),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~opinion),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~myft),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~most-popular),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~life-and-arts),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~markets),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~technology),page:view->count(device.spoorId)),@pct(cta:click->count(device.spoorId)->filter(click.dataTrackablePath~video),page:view->count(device.spoorId)))->filter(page.location.type=frontpage)->relabel(_headings,header,top stories,fastft,editors picks,opinion,myFT,most popular,life & arts,markets,technology,video)->sortDesc()"
    printer: BarChart

  # CTR (all) --------------------------------------------------
  -
    question: How many clicks are logged in users making on the frontpage?
    name: ctr/average/clicks/all
    query: "@ratio( cta:click->count()->filter(user.uuid), page:view->count(user.uuid) )->filter(page.location.type=frontpage)"
    datalabel: Average clicks per user

  # PERFORMANCE --------------------------------------------------
  -
    question: What is the performance of the fonts loading?
    name: performance/fontload/marks
    query: page:load-timing->median(context.timings.marks.fontsLoaded)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Fonts loaded
  -
    question: What is the performance of the fonts loading (from point page has downloaded)?
    name: performance/fontload/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.fontsLoaded)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Fonts loaded (offset from the domLoading event)
  -
    question: What is the performance of the page starting to render?
    name: performance/pagestartrender/custom
    query: page:load-timing->median(context.timings.custom.firstPaint)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page starts to render
  -
    question: What is the performance of the page starting to render (from point page has downloaded)?
    name: performance/pagestartrender/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.firstPaint)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page starts to render (offset from the domLoading event)
  -
    question: What is the performance of the page loading?
    name: performance/pageload/offset
    query: page:load-timing->median(context.timings.offset.loadEventEnd)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loaded
  -
    question: What is the performance of the page loading (from point page has downloaded)?
    name: performance/pageload/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.loadEventEnd)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loaded (offset from the domLoading event)
  -
    question: What are browsers' average load times?
    name: performance/averagepageload/offset
    query: page:load-timing->median(context.timings.offset.loadEventEnd)->filter(page.location.type=frontpage)->filter(device.browserName!=false)->group(device.browserName)->divide(1000)->sortAsc()
    printer: BarChart
    datalabel: Average page load time by browser
  -
    question: What are browsers' average load times (from point page has downloaded)?
    name: performance/averagepageload/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.loadEventEnd)->filter(page.location.type=frontpage)->filter(device.browserName!=false)->group(device.browserName)->divide(1000)->sortAsc()
    printer: BarChart
    datalabel: Average page load time by browser (offset from the domLoading event)
  -
    question: What is the timing of page loading events (loadEventStart)?
    name: performance/pageloadingevents/loadeventstart/offset
    query: page:load-timing->median(context.timings.offset.loadEventStart)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loading events (loadEventStart)
  -
    question: What is the timing of page loading events (loadEventStart) (from point page has downloaded)?
    name: performance/pageloadingevents/loadeventstart/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.loadEventStart)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loading events (loadEventStart) (offset from the domLoading event)
  -
    question: What is the timing of page loading events (domComplete)?
    name: performance/pageloadingevents/domcomplete/offset
    query: page:load-timing->median(context.timings.offset.domComplete)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loading events (domComplete)
  -
    question: What is the timing of page loading events (domComplete) (from point page has downloaded)?
    name: performance/pageloadingevents/domcomplete/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.domComplete)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loading events (domComplete) (offset from the domLoading event)
  -
    question: What is the timing of page loading events (domContentLoadedEventStart)?
    name: performance/pageloadingevents/domcontentloadedeventstart/offset
    query: page:load-timing->median(context.timings.offset.domContentLoadedEventStart)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loading events (domContentLoadedEventStart)
  -
    question: What is the timing of page loading events (domContentLoadedEventStart) (from point page has downloaded)?
    name: performance/pageloadingevents/domcontentloadedeventstart/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.domContentLoadedEventStart)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loading events (domContentLoadedEventStart) (offset from the domLoading event)
  -
    question: What is the timing of page loading events (domInteractive)?
    name: performance/pageloadingevents/dominteractive/offset
    query: page:load-timing->median(context.timings.offset.domInteractive)->filter(page.location.type=frontpage)->divide(1000)
    datalabel: Page loading events (domInteractive)
  -
    question: What is the timing of page loading events (domInteractive) (from point page has downloaded)?
    name: performance/pageloadingevents/dominteractive/domloadingoffset
    query: page:load-timing->median(context.timings.domLoadingOffset.domInteractive)->filter(page.location.type=frontpage)->filter(context.timings.offset.domInteractive)->divide(1000)
    datalabel: Page loading events (domInteractive) (offset from the domLoading event)

  # BROWSER USAGE --------------------------------------------------
  -
    question: Which browsers are used for frontpage visits (percentage)?
    name: browsers/visits/percentage
    query: "@pct( page:view->count()->group(device.browserName), page:view->count() )->filter(page.location.type=frontpage)->filter(user.uuid)->filter(device.browserName)->filter(device.browserName!=false)->sortDesc()"
    printer: BarChart
    datalabel: Percentage of frontpage visits
  -
    question: Which browsers are used for frontpage visits (number)?
    name: browsers/visits/total
    query: page:view->count()->filter(page.location.type=frontpage)->filter(user.uuid)->filter(device.browserName)->filter(device.browserName!=false)->group(device.browserName)->sortDesc()
    printer: BarChart
    datalabel: Number of frontpage visits
