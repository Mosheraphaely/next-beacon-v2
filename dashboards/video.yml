# Note: Any strings begining with @ or % must be wrapped in quote marks
---
id: video
title: Video
isPrimary: false
charts:
  -
    question: How many videos are watched in full?
    name: new
    query: "@concat(
              video:playing->count()->filter(context.product=next)->filter(context.progress=0),
              video:ended->count()->filter(context.product=next)
              )->relabel(_headings, Video Started, Video Ended)"
    datalabel: new
    printer: BarChart
    interval: false
  -
    question: How far into the video are users watching?
    name: progress
    query: "@concat(
            video:progress
            ->count()
            ->filter(context.product=next)
            ->filter(context.progress>=10)
            ->group(context.progress),
            video:ended->count()->filter(context.product=next))
            ->print(ColumnChart)"
    datalabel: Progress
    interval: false
  -
    question: How many videos have ads?
    name: ads
    query: "@concat(
              video:playing
                ->count()
                ->filter(context.product=next)
                ->filter(context.progress=0),
              video:adStart
                ->count()
                ->filter(context.product=next)
              )
              ->interval(d)
              ->print(AreaChart)"
    datalabel: Videos with ads
    interval: false

  -
    question: How many ads are watched in full (and video content started)?
    name: adsFull
    query: "@concat(
              video:adStart
                ->count()
                ->filter(context.product=next),
              video:adComplete
                ->count()
                ->filter(context.product=next)
              )
              ->interval(d)
              ->print(AreaChart)"
    datalabel: Ads watched in full
    interval: false
